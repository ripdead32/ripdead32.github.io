<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rip_Dead Site - Search</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body {margin:0;padding:0;background:black;color:#00ff00;font-family:"Courier New", monospace;text-align:center;}
h1 {font-size:2.5em;margin-top:60px;text-shadow:0 0 10px #00ff00;}
input {margin:10px;padding:10px;border:2px solid #00ff00;border-radius:6px;background:black;color:#00ff00;font-family:"Courier New", monospace;}
button {padding:10px 20px;border:2px solid #00ff00;border-radius:6px;background:black;color:#00ff00;font-weight:bold;cursor:pointer;}
button:hover {transform: scale(1.1);box-shadow:0 0 10px #00ff00;}
#results {margin-top:30px;}
.user-link {display:block;margin:10px;font-size:1.2em;cursor:pointer;text-decoration:underline;color:#00ff00;}
.user-link:hover {text-shadow:0 0 8px #00ff00;}
</style>
</head>
<body>

<h1>Search Users</h1>

<input type="text" id="search-input" placeholder="Enter username">
<button id="search-btn">Search</button>

<div id="results"></div>

<script>
const supabaseUrl = 'https://uuvddjdbflwtbrbcgttj.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV1dmRkamRiZmx3dGJyYmNndHRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2MTAzNTIsImV4cCI6MjA4NzE4NjM1Mn0.b_betmbrXem0_EwtXCoXRLU7E2w2KEKJKVncQ9f0dVE';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

const searchBtn = document.getElementById('search-btn');
const searchInput = document.getElementById('search-input');
const resultsDiv = document.getElementById('results');

searchBtn.addEventListener('click', async () => {
    const query = searchInput.value.trim();
    resultsDiv.innerHTML = '';

    if (!query) return;

    const { data: users, error } = await supabase
        .from('users')
        .select('username')
        .ilike('username', `%${query}%`)
        .limit(20);

    if (error) {
        resultsDiv.innerHTML = 'Error fetching users';
        return;
    }

    if (!users.length) {
        resultsDiv.innerHTML = 'No users found';
        return;
    }

    users.forEach(user => {
        const link = document.createElement('a');
        link.textContent = user.username;
        link.href = `/users/${user.username}`;
        link.className = 'user-link';
        resultsDiv.appendChild(link);
    });
});
</script>

</body>
</html>
